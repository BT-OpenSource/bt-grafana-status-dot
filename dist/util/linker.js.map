{"version":3,"sources":["../../src/util/linker.js"],"names":["Linker","panel","linkSrv","dots","forEach","dot","linkScope","_populateScope","_link","linkVars","value","name","split","variable","index","links","undefined","scope","scopedVars","linkInfo","linkIndex","link","getPanelLinkAnchorInfo","Object","assign"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wBAAaA,M;AACX,wBAAaC,KAAb,EAAoBC,OAApB,EAA6B;AAAA;;AAC3B,eAAKD,KAAL,GAAaA,KAAb;AACA,eAAKC,OAAL,GAAeA,OAAf;AACD;;;;+BAEKC,I,EAAM;AACVA,iBAAKC,OAAL,CAAa,eAAO;AAAEC,kBAAIC,SAAJ,GAAgB,EAAhB;AAAqB,aAA3C;AACAH,iBAAKC,OAAL,CAAa,KAAKG,cAAlB,EAAkC,IAAlC;AACAJ,iBAAKC,OAAL,CAAa,KAAKI,KAAlB,EAAyB,IAAzB;AACD;;;yCAEeH,G,EAAK;AACnB,iBAAKJ,KAAL,CAAWQ,QAAX,CAAoBL,OAApB,CAA4B,oBAAY;AACtC,kBAAIM,QAAQL,IAAIM,IAAJ,CAASC,KAAT,CAAe,GAAf,EAAoBC,SAASC,KAA7B,CAAZ;AACAT,kBAAIC,SAAJ,CAAcO,SAASF,IAAvB,IAA+B,EAAED,OAAOA,KAAT,EAA/B;AACD,aAHD;AAID;;;gCAEML,G,EAAK;AACZ,gBAAI,KAAKJ,KAAL,CAAWc,KAAX,KAAqBC,SAAzB,EAAoC;AAClC,gBAAIC,QAAQ,KAAKhB,KAAL,CAAWiB,UAAvB;;AAEA,gBAAIC,WAAW,KAAKlB,KAAL,CAAWc,KAAX,CAAiB,KAAKd,KAAL,CAAWmB,SAA5B,CAAf;AACA,gBAAID,aAAaH,SAAjB,EAA4B;;AAE5BX,gBAAIgB,IAAJ,GAAW,KAAKnB,OAAL,CAAaoB,sBAAb,CACTH,QADS,EACCI,OAAOC,MAAP,CAAc,EAAd,EAAkBP,KAAlB,EAAyBZ,IAAIC,SAA7B,CADD,CAAX;AAED","file":"linker.js","sourcesContent":["export class Linker {\n  constructor (panel, linkSrv) {\n    this.panel = panel\n    this.linkSrv = linkSrv\n  }\n\n  call (dots) {\n    dots.forEach(dot => { dot.linkScope = { } })\n    dots.forEach(this._populateScope, this)\n    dots.forEach(this._link, this)\n  }\n\n  _populateScope (dot) {\n    this.panel.linkVars.forEach(variable => {\n      var value = dot.name.split('.')[variable.index]\n      dot.linkScope[variable.name] = { value: value }\n    })\n  }\n\n  _link (dot) {\n\t\tif (this.panel.links === undefined) return\n    var scope = this.panel.scopedVars\n\n    var linkInfo = this.panel.links[this.panel.linkIndex]\n    if (linkInfo === undefined) return\n\n    dot.link = this.linkSrv.getPanelLinkAnchorInfo(\n      linkInfo, Object.assign({}, scope, dot.linkScope))\n  }\n}\n"]}