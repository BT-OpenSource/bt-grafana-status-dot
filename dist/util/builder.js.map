{"version":3,"sources":["../../src/util/builder.js"],"names":["math","Builder","options","seriesList","map","_eval","series","scratchPadExp","mathScratchPad","displayValueExp","mathDisplayValue","colorValueExp","mathColorValue","scope","data","_toValues","name","target","scratchPad","eval","displayValue","colorValue","points","datapoints","point","filter","value"],"mappings":";;;;;;;;;;;;;;;AAAYA,U;;;;;;;;;;;;;;;;;;;;;yBAECC,O;AACX,yBAAaC,OAAb,EAAsB;AAAA;;AACpB,eAAKA,OAAL,GAAeA,OAAf;AACD;;;;iCAEsB;AAAA,gBAAjBC,UAAiB,uEAAJ,EAAI;;AACrB,mBAAOA,WAAWC,GAAX,CAAe,KAAKC,KAApB,EAA2B,IAA3B,CAAP;AACD;;;gCAEMC,M,EAAQ;AACb,gBAAIC,gBAAgB,KAAKL,OAAL,CAAaM,cAAjC;AACA,gBAAIC,kBAAkB,KAAKP,OAAL,CAAaQ,gBAAnC;AACA,gBAAIC,gBAAgB,KAAKT,OAAL,CAAaU,cAAjC;AACA,gBAAIC,QAAQ,EAAEC,MAAM,KAAKC,SAAL,CAAeT,MAAf,CAAR,EAAZ;;AAEA,mBAAO,EAAEU,MAAMV,OAAOW,MAAf;AACLC,0BAAYlB,KAAKmB,IAAL,CAAUZ,aAAV,EAAyBM,KAAzB,CADP;AAELO,4BAAcpB,KAAKmB,IAAL,CAAUV,eAAV,EAA2BI,KAA3B,CAFT;AAGLQ,0BAAYrB,KAAKmB,IAAL,CAAUR,aAAV,EAAyBE,KAAzB,CAHP,EAAP;AAID;;;oCAEUP,M,EAAQ;AACjB,gBAAIgB,SAAShB,OAAOiB,UAAP,CAAkBnB,GAAlB,CAAsB;AAAA,qBAASoB,MAAM,CAAN,CAAT;AAAA,aAAtB,CAAb;AACA,mBAAOF,OAAOG,MAAP,CAAc;AAAA,qBAASC,SAAS,IAAlB;AAAA,aAAd,CAAP;AACD","file":"builder.js","sourcesContent":["import * as math from '../external/math.min'\n\nexport class Builder {\n  constructor (options) {\n    this.options = options\n  }\n\n  call (seriesList = []) {\n    return seriesList.map(this._eval, this)\n  }\n\n  _eval (series) {\n    var scratchPadExp = this.options.mathScratchPad\n    var displayValueExp = this.options.mathDisplayValue\n    var colorValueExp = this.options.mathColorValue\n    var scope = { data: this._toValues(series) }\n\n    return { name: series.target,\n      scratchPad: math.eval(scratchPadExp, scope),\n      displayValue: math.eval(displayValueExp, scope),\n      colorValue: math.eval(colorValueExp, scope) }\n  }\n\n  _toValues (series) {\n    var points = series.datapoints.map(point => point[0])\n    return points.filter(value => value != null)\n  }\n}\n"]}