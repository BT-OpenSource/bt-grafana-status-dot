{"version":3,"sources":["../../src/util/presenter.js"],"names":["_","Presenter","options","dots","forEach","_render","dot","percentChange","_percentChangeFor","color","_colorFor","thresholds","concat","sort","a","b","value","threshold","find","defaultColor","change","latestValue","oldestValue"],"mappings":";;;;;;;;;;;;;;;AAAOA,O;;;;;;;;;;;;;;;;;;;;;2BAEMC,S;AACX,2BAAaC,OAAb,EAAsB;AAAA;;AACpB,eAAKA,OAAL,GAAeA,OAAf;AACD;;;;+BAEKC,I,EAAM;AAAA;;AACVA,iBAAKC,OAAL,CAAa;AAAA,qBAAO,MAAKC,OAAL,CAAaC,GAAb,CAAP;AAAA,aAAb;AACD;;;kCAEQA,G,EAAK;AACZA,gBAAIC,aAAJ,GAAoB,KAAKC,iBAAL,CAAuBF,GAAvB,CAApB;AACAA,gBAAIG,KAAJ,GAAY,KAAKC,SAAL,CAAeJ,IAAIC,aAAnB,CAAZ;AACD;;;oCAEUA,a,EAAe;AACxB,gBAAII,aAAa,KAAKT,OAAL,CAAaS,UAAb,CAAwBC,MAAxB,GAAiCC,IAAjC,CAAsC,UAACC,CAAD,EAAIC,CAAJ;AAAA,qBAAUA,EAAEC,KAAF,GAAUF,EAAEE,KAAtB;AAAA,aAAtC,CAAjB;AACA,gBAAIC,YAAYjB,EAAEkB,IAAF,CAAOP,UAAP,EAAmB,UAACM,SAAD;AAAA,qBAAeV,iBAAiBU,UAAUD,KAA1C;AAAA,aAAnB,CAAhB;AACA,mBAAOC,YAAYA,UAAUR,KAAtB,GAA8B,KAAKP,OAAL,CAAaiB,YAAlD;AACD;;;4CAEkBb,G,EAAK;AACtB,gBAAIc,SAASd,IAAIe,WAAJ,GAAkBf,IAAIgB,WAAnC;AACA,mBAAQF,SAASd,IAAIgB,WAAd,GAA6B,GAApC;AACD","file":"presenter.js","sourcesContent":["import _ from 'lodash'\n\nexport class Presenter {\n  constructor (options) {\n    this.options = options\n  }\n\n  call (dots) {\n    dots.forEach(dot => this._render(dot))\n  }\n\n  _render (dot) {\n    dot.percentChange = this._percentChangeFor(dot)\n    dot.color = this._colorFor(dot.percentChange)\n  }\n\n  _colorFor (percentChange) {\n    var thresholds = this.options.thresholds.concat().sort((a, b) => b.value - a.value)\n    var threshold = _.find(thresholds, (threshold) => percentChange >= threshold.value)\n    return threshold ? threshold.color : this.options.defaultColor\n  }\n\n  _percentChangeFor (dot) {\n    var change = dot.latestValue - dot.oldestValue\n    return (change / dot.oldestValue) * 100\n  }\n}\n"]}